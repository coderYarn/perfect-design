(self.webpackChunkperfect_map=self.webpackChunkperfect_map||[]).push([[71],{87071:function(m,h,s){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var y=function(){function e(t,u){for(var r=0;r<u.length;r++){var n=u[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,u,r){return u&&e(t.prototype,u),r&&e(t,r),t}}(),R=s(36047),k=O(R),_=s(14738),v=O(_),P=s(92921),A=O(P),S=s(77162);function O(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function b(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=["center","radius","draggable","extData","visible","style"],a=d.concat(["zIndex","bubble"]),f=function(e){b(t,e);function t(u){E(this,t);var r=I(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,u));if(typeof window!="undefined")if(!u.__map__)A.default.warning("MAP_INSTANCE_REQUIRED");else{var n=r;r.setterMap={visible:function(l){n.mapCircle&&(l?n.mapCircle.show():n.mapCircle.hide())},style:function(l){n.mapCircle&&n.mapCircle.setOptions(l)}},r.converterMap={center:S.toLnglat},r.state={loaded:!1},r.map=u.__map__,r.element=r.map.getContainer(),r.createInstance(u).then(function(){r.setState({loaded:!0}),r.props.onInstanceCreated&&r.props.onInstanceCreated()})}return r}return y(t,[{key:"createInstance",value:function(r){var n=this.buildCreateOptions(r);return n.map=this.map,this.mapCircle=new window.AMap.Circle(n),Promise.resolve(this.mapCircle)}},{key:"buildCreateOptions",value:function(r){var n=this,i={};return a.forEach(function(l){if(l in r)if(l==="style"&&r.style!==void 0){var g=Object.keys(r.style);g.forEach(function(C){i[C]=r.style[C]})}else i[l]=n.getSetterValue(l,r)}),i}},{key:"getSetterValue",value:function(r,n){return r in this.converterMap?this.converterMap[r](n[r]):n[r]}},{key:"renderEditor",value:function(r){return!r||k.default.Children.count(r)!==1?null:k.default.cloneElement(k.default.Children.only(r),{__circle__:this.mapCircle,__map__:this.map,__ele__:this.element})}},{key:"render",value:function(){return this.state.loaded?this.renderEditor(this.props.children):null}},{key:"instance",get:function(){return this.mapCircle}}]),t}(k.default.Component);h.default=(0,v.default)(f)},23541:function(m,h,s){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var y=function(){function d(a,f){for(var e=0;e<f.length;e++){var t=f[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,t.key,t)}}return function(a,f,e){return f&&d(a.prototype,f),e&&d(a,e),a}}(),R=s(36047),k=S(R),_=s(92921),v=S(_),P=s(16198),A=S(P);function S(d){return d&&d.__esModule?d:{default:d}}function O(d,a){if(!(d instanceof a))throw new TypeError("Cannot call a class as a function")}function E(d,a){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:d}function I(d,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);d.prototype=Object.create(a&&a.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(d,a):d.__proto__=a)}var b=function(d){I(a,d);function a(f){O(this,a);var e=E(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,f));return typeof window!="undefined"&&(f.__map__&&f.__circle__?(e.map=f.__map__,e.element=e.map.getContainer(),e.circle=f.__circle__,e.editorActive=!1,e.onPropsUpdate(f)):v.default.warning("CIRCLE_INSTANCE_REQUIRED")),e}return y(a,[{key:"componentWillReceiveProps",value:function(e){this.map&&this.onPropsUpdate(e)}},{key:"onPropsUpdate",value:function(e){"active"in e&&e.active===!1?this.toggleActive(!1,e):this.toggleActive(!0,e)}},{key:"toggleActive",value:function(e,t){e?this.editorActive||this.activeEditor(t):this.editorActive&&this.inactiveEditor()}},{key:"activeEditor",value:function(e){var t=this;this.loadCircleEditor(e).then(function(u){t.editorActive=!0,u.open()})}},{key:"inactiveEditor",value:function(){this.editorActive=!1,this.circleEditor&&this.circleEditor.close()}},{key:"loadCircleEditor",value:function(e){var t=this;return this.circleEditor?Promise.resolve(this.circleEditor):new Promise(function(u){t.map.plugin(["AMap.CircleEditor"],function(){u(t.createEditorInstance(e))})})}},{key:"createEditorInstance",value:function(e){this.circleEditor=new window.AMap.CircleEditor(this.map,this.circle);var t=this.exposeEditorInstance(e);return t&&this.bindEditorEvents(t),this.circleEditor}},{key:"exposeEditorInstance",value:function(e){if("events"in e){var t=e.events||{};return(0,A.default)(t.created)&&t.created(this.circleEditor),delete t.created,t}return!1}},{key:"bindEditorEvents",value:function(e){var t=this,u=Object.keys(e);u.length&&u.forEach(function(r){t.circleEditor.on(r,e[r])})}},{key:"render",value:function(){return null}}]),a}(k.default.Component);h.default=b},8181:function(m,h,s){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var y=function(){function a(f,e){for(var t=0;t<e.length;t++){var u=e[t];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(f,u.key,u)}}return function(f,e,t){return e&&a(f.prototype,e),t&&a(f,t),f}}(),R=s(36047),k=S(R),_=s(14738),v=S(_),P=s(92921),A=S(P);function S(a){return a&&a.__esModule?a:{default:a}}function O(a,f){if(!(a instanceof f))throw new TypeError("Cannot call a class as a function")}function E(a,f){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:a}function I(a,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);a.prototype=Object.create(f&&f.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(a,f):a.__proto__=f)}var b={clickable:!1,opacity:1,visible:!0},d=function(a){I(f,a);function f(e){O(this,f);var t=E(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,e));if(typeof window!="undefined")if(!e.__map__)A.default.warning("MAP_INSTANCE_REQUIRED");else{var u=t;t.setterMap={visible:function(n){n?u.image&&u.image.show():u.image&&u.image.hide()},src:function(n){u.image.setImageUrl(n)}},t.converterMap={bounds:function(n){return u.buildBounds(n)}},t.map=e.__map__,t.element=t.map.getContainer(),setTimeout(function(){t.createGroundImage(e)},13)}return t}return y(f,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"checkPropsChanged",value:function(t,u){return this.props[u]!==t[u]}},{key:"createGroundImage",value:function(t){var u=void 0,r=void 0,n=void 0,i=void 0;"src"in t?u=t.src:A.default.warning("SRC_REQUIRED",!0),"bounds"in t?r=this.buildBounds(t.bounds):A.default.warning("BOUNDS_REQUIRED",!0),"clickable"in t?i=t.clickable:i=b.clickable,"opacity"in t?n=t.opacity:n=b.opacity,this.image=new window.AMap.GroundImage(u,r,{map:this.map,clickable:i,opacity:n}),this.props.onInstanceCreated&&this.props.onInstanceCreated()}},{key:"buildBounds",value:function(t){if(!t||"getSouthWest"in t)return t;var u=new window.AMap.Bounds(new window.AMap.LngLat(t.sw.longitude,t.sw.latitude),new window.AMap.LngLat(t.ne.longitude,t.ne.latitude));return u}},{key:"render",value:function(){return null}},{key:"instance",get:function(){return this.image}}]),f}(k.default.Component);h.default=(0,v.default)(d)},90516:function(m,h,s){"use strict";var y;y={value:!0},y=y=y=y=y=y=y=y=y=y=y=void 0;var R=s(11657),k=C(R),_=s(91558),v=C(_),P=s(52891),A=C(P),S=s(87071),O=C(S),E=s(52693),I=C(E),b=s(52446),d=C(b),a=s(17518),f=C(a),e=s(8181),t=C(e),u=s(23541),r=C(u),n=s(32406),i=C(n),l=s(74328),g=C(l);function C(W){return W&&W.__esModule?W:{default:W}}y=k.default,y=A.default,y=O.default,y=r.default,y=I.default,y=d.default,y=i.default,y=f.default,y=t.default,y=v.default,y=g.default,y={Map:k.default,Markers:A.default,Circle:O.default,CircleEditor:r.default,Polygon:I.default,Polyline:d.default,PolyEditor:i.default,InfoWindow:f.default,GroundImage:t.default,Marker:v.default,MouseTool:g.default}},17518:function(m,h,s){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var y=function(){function u(r,n){for(var i=0;i<n.length;i++){var l=n[i];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(r,l.key,l)}}return function(r,n,i){return n&&u(r.prototype,n),i&&u(r,i),r}}(),R=s(36047),k=E(R),_=s(55262),v=s(14738),P=E(v),A=s(92921),S=E(A),O=s(77162);function E(u){return u&&u.__esModule?u:{default:u}}function I(u,r){if(!(u instanceof r))throw new TypeError("Cannot call a class as a function")}function b(u,r){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:u}function d(u,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);u.prototype=Object.create(r&&r.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(u,r):u.__proto__=r)}var a=k.default.Component,f=["content","position","size","visible","offset"],e=f.concat(["isCustom","autoMove","closeWhenClickMap","showShadow"]),t=function(u){d(r,u);function r(n){I(this,r);var i=b(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,n));if(typeof window!="undefined")if(!n.__map__)S.default.warning("MAP_INSTANCE_REQUIRED");else{var l=i;i.setterMap={visible:function(C){C?(l.showWindow(),l.setClassName(l.props),l.setChild(l.props)):l.closeWindow()}},i.converterMap={size:O.toSize,offset:O.toPixel,position:O.toLnglat},i.map=n.__map__,i.isCustom=!0,setTimeout(function(){i.createInfoWindow(n)},13)}return i}return y(r,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentWillReceiveProps",value:function(i){this.map&&this.refreshWindowLayout(i)}},{key:"createInfoWindow",value:function(i){var l=this.buildCreateOptions(i);this.infoWindow=new window.AMap.InfoWindow(l),this.props.onInstanceCreated&&this.props.onInstanceCreated()}},{key:"refreshWindowLayout",value:function(i){this.setChild(i),this.setClassName(i)}},{key:"checkPropChanged",value:function(i,l){return this.props[i]!==l[i]}},{key:"showWindow",value:function(){this.infoWindow.open(this.map,this.infoWindow.getPosition())}},{key:"closeWindow",value:function(){this.infoWindow.close()}},{key:"buildCreateOptions",value:function(i){var l=this,g={};return"isCustom"in i?g.isCustom=!!i.isCustom:g.isCustom=!1,"content"in i?g.content=i.content:(this.infoDOM=document.createElement("div"),g.content=this.infoDOM),e.forEach(function(C){C in i&&["visible","isCustom","content"].indexOf(C)===-1&&(g[C]=l.getSetterValue(C,i[C]))}),g}},{key:"getSetterValue",value:function(i,l){return i in this.converterMap?this.converterMap[i](l):l}},{key:"setChild",value:function(i){var l=i.children;this.infoDOM&&l?(0,_.render)(k.default.createElement("div",null,l),this.infoDOM):i.children&&console.warn("\u56E0\u4E3A\u4F60\u8BBE\u7F6E isCustom \u4E3A true\uFF0CInfoWindow \u7684 Children \u88AB\u5FFD\u7565")}},{key:"setClassName",value:function(i){if(this.infoDOM){var l="";"className"in i&&i.className?l+=i.className:i.isCustom===!0&&(l+="amap_markers_pop_window"),this.infoDOM.className=l}}},{key:"render",value:function(){return null}},{key:"instance",get:function(){return this.infoWindow}}]),r}(a);h.default=(0,P.default)(t)},11657:function(m,h,s){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var y=Object.assign||function(x){for(var w=1;w<arguments.length;w++){var c=arguments[w];for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&(x[o]=c[o])}return x},R=function(){function x(w,c){for(var o=0;o<c.length;o++){var p=c[o];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(w,p.key,p)}}return function(w,c,o){return c&&x(w.prototype,c),o&&x(w,o),w}}(),k=s(36047),_=a(k),v=s(76953),P=a(v),A=s(16198),S=a(A),O=s(92921),E=a(O),I=s(77162),b=s(14738),d=a(b);function a(x){return x&&x.__esModule?x:{default:x}}function f(x,w){var c={};for(var o in x)w.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(x,o)&&(c[o]=x[o]);return c}function e(x,w){if(!(x instanceof w))throw new TypeError("Cannot call a class as a function")}function t(x,w){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:x}function u(x,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);x.prototype=Object.create(w&&w.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(x,w):x.__proto__=w)}var r=_.default.Component,n=_.default.Children,i={width:"100%",height:"100%"},l={width:"100%",height:"100%",position:"relative"},g=["layers","zoom","center","labelzIndex","mapStyle","features","cursor","pitch"],C=["animateEnable","doubleClickZoom","dragEnable","isHotspot","jogEnable","keyboardEnable","resizeEnable","rotateEnable","scrollWheel","touchZoom","zoomEnable"],W=["view","zooms","showIndoorMap","indoorMap","expandZoomRange","showBuildingBlock","viewMode","pitchEnable","buildingAnimation","skyColor"],B=g.concat(C,W),N={MapType:{showRoad:!1,showTraffic:!1,defaultType:0},ToolBar:{position:"RB",noIpLocate:!0,locate:!0,liteStyle:!0,autoPosition:!1},OverView:{},ControlBar:{}},T=function(x){u(w,x);function w(c){e(this,w);var o=t(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,c));o.state={mapLoaded:!1};var p=o;return o.setterMap={zoom:function(D){p.map.setZoom(D)},cursor:function(D){p.map.setDefaultCursor(D)},labelzIndex:function(D){p.map.setlabelzIndex(D)}},o.converterMap={center:I.toLnglat},typeof window!="undefined"&&(o.pluginMap={},new P.default({key:c.amapkey,useAMapUI:c.useAMapUI,version:c.version,protocol:c.protocol}).load().then(function(){o.createInstance(),o.state.mapLoaded||o.setState({mapLoaded:!0})})),o}return R(w,[{key:"componentWillReceiveProps",value:function(o){this.state.mapLoaded&&this.updateMapProps(this.props,o)}},{key:"renderChildren",value:function(){var o=this;return n.map(this.props.children,function(p){if(p){var M=p.type;return M.preventAmap||typeof M=="string"?p:_.default.cloneElement(p,{__map__:o.map})}return p})}},{key:"createInstance",value:function(){if(!this.map){var o=this.buildCreateOptions();this.map=new window.AMap.Map(this.mapWrapper,o),this.setPlugins(this.props),this.props.onInstanceCreated&&this.props.onInstanceCreated()}}},{key:"buildCreateOptions",value:function(){var o=this,p=this.props,M={};return B.forEach(function(D){D in p&&(M[D]=o.getSetterValue(D,p))}),M}},{key:"updateMapProps",value:function(o,p){var M=this,D={},j=!1,U=!1;C.forEach(function(L){L in p&&(U=!0,M.detectPropChanged(L,o,p)&&(j=!0,D[L]=p[L]))}),j&&this.map.setStatus(D),U&&"status"in p&&E.default.warning(`\u4EE5\u4E0B\u8FD9\u4E9B\u5C5E\u6027\u53EF\u4EE5\u5355\u72EC\u63D0\u4F9B\u8FDB\u884C\u914D\u7F6E\uFF0C\u4E5F\u53EF\u4EE5\u7EDF\u4E00\u4F5C\u4E3A\u2018status\u2019\u5C5E\u6027\u914D\u7F6E\uFF1B\u4F46\u662F\u8BF7\u4E0D\u8981\u540C\u65F6\u4F7F\u7528\u8FD9\u4E24\u79CD\u65B9\u5F0F\u3002
\uFF08`+C.join(", ")+"\uFF09"),W.forEach(function(L){L in p&&M.detectPropChanged(L,o,p)&&E.default.warning("'"+L+"' \u662F\u4E00\u4E2A\u9759\u6001\u5C5E\u6027\uFF0C\u5730\u56FE\u5B9E\u4F8B\u521B\u5EFA\u6210\u529F\u540E\u65E0\u6CD5\u4FEE\u6539")}),this.setPlugins(p)}},{key:"getSetterValue",value:function(o,p){return o in this.converterMap?this.converterMap[o](p[o]):p[o]}},{key:"detectPropChanged",value:function(o,p,M){return p[o]!==M[o]}},{key:"setPlugins",value:function(o){var p=this,M=["Scale","ToolBar","MapType","OverView","ControlBar"];if("plugins"in o){var D=o.plugins;D&&D.length&&D.forEach(function(j){var U=void 0,L=void 0,F=void 0;typeof j=="string"?(U=j,L=null,F=!0):(U=j.name,L=j.options||{},F="visible"in L&&typeof L.visible=="boolean"?L.visible:!0,delete L.visible);var z=M.indexOf(U);z===-1?E.default.warning("\u6CA1\u6709 \u2018"+U+"\u2019 \u8FD9\u4E2A\u63D2\u4EF6\uFF0C\u8BF7\u68C0\u67E5\u662F\u5426\u62FC\u5199\u9519\u8BEF"):F&&(M.splice(z,1),p.installPlugin(U,L))})}this.removeOrDisablePlugins(M)}},{key:"removeOrDisablePlugins",value:function(o){var p=this;o&&o.length&&o.forEach(function(M){M in p.pluginMap&&(M==="ControlBar"?(p.map.removeControl(p.pluginMap[M]),delete p.pluginMap[M]):p.pluginMap[M].hide())})}},{key:"installPlugin",value:function(o,p){switch(p=p||{},o){case"Scale":case"ToolBar":case"OverView":case"MapType":this.setMapPlugin(o,p);break;case"ControlBar":this.setControlBar(p);break;default:}}},{key:"setMapPlugin",value:function(o,p){var M=this;if(this.pluginMap[o])this.pluginMap[o].show();else{var D=p.onCreated,j=f(p,["onCreated"]),U=y({},N[o],j);this.map.plugin(["AMap."+o],function(){M.pluginMap[o]=new window.AMap[o](U),M.map.addControl(M.pluginMap[o]),(0,S.default)(D)&&D(M.pluginMap[o])})}}},{key:"setControlBar",value:function(o){var p=this;if(!this.pluginMap.ControlBar){var M=o.onCreated,D=f(o,["onCreated"]),j=y({},N.ControlBar,D);this.map.plugin(["AMap.ControlBar"],function(){p.pluginMap.ControlBar=new window.AMap.ControlBar(j),p.map.addControl(p.pluginMap.ControlBar),(0,S.default)(M)&&M(p.pluginMap.ControlBar)})}}},{key:"render",value:function(){var o=this;return _.default.createElement("div",{style:l},_.default.createElement("div",{ref:function(M){o.mapWrapper=M},style:i},this.state.mapLoaded?null:this.props.loading||null),_.default.createElement("div",null,this.state.mapLoaded?this.renderChildren():null))}},{key:"instance",get:function(){return this.map}}]),w}(r);h.default=(0,d.default)(T)},91558:function(m,h,s){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R=function(){function t(u,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(u,i.key,i)}}return function(u,r,n){return r&&t(u.prototype,r),n&&t(u,n),u}}(),k=s(36047),_=b(k),v=s(55262),P=s(92921),A=b(P),S=s(14738),O=b(S),E=s(57107),I=s(77162);function b(t){return t&&t.__esModule?t:{default:t}}function d(t,u){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}function a(t,u){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:t}function f(t,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);t.prototype=Object.create(u&&u.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(t,u):t.__proto__=u)}var e=function(t){f(u,t);function u(r){d(this,u);var n=a(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,r));if(typeof window!="undefined")if(!r.__map__)A.default.warning("MAP_INSTANCE_REQUIRED");else{var i=n;n.setterMap={visible:function(g){g?i.marker&&i.marker.show():i.marker&&i.marker.hide()},zIndex:function(g){i.marker&&i.marker.setzIndex(g)}},n.converterMap={position:I.toLnglat,offset:I.toPixel},n.map=r.__map__,n.element=n.map.getContainer(),setTimeout(function(){n.createMarker(r)},13)}return n}return R(u,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentWillReceiveProps",value:function(n){this.map&&this.refreshMarkerLayout(n)}},{key:"createMarker",value:function(n){var i=this.buildCreateOptions(n);this.marker=new window.AMap.Marker(i),this.marker.render=function(l){return function(g){(0,E.renderMarkerComponent)(g,l)}}(this.marker),this.props.onInstanceCreated&&this.props.onInstanceCreated(),this.setMarkerLayout(n),this.setChildComponent(n)}},{key:"buildCreateOptions",value:function(n){var i=this,l={};return E.MarkerAllProps.forEach(function(g){g in n&&(l[g]=i.getSetterParam(g,n[g]))}),l.map=this.map,l}},{key:"setMarkerLayout",value:function(n){("render"in n||"children"in n&&n.children)&&(this.createContentWrapper(),"className"in n&&n.className&&(this.contentWrapper.className=n.className))}},{key:"createContentWrapper",value:function(){this.contentWrapper=document.createElement("div"),this.marker.setContent(this.contentWrapper)}},{key:"setChildComponent",value:function(n){if(this.contentWrapper){if("className"in n&&n.className&&(this.contentWrapper.className=n.className),"render"in n)(0,E.renderMarkerComponent)(n.render,this.marker);else if("children"in n){var i=n.children,l=typeof i=="undefined"?"undefined":y(i);l!=="undefined"&&this.contentWrapper&&(0,v.render)(_.default.createElement("div",null,i),this.contentWrapper)}}}},{key:"refreshMarkerLayout",value:function(n){this.setChildComponent(n)}},{key:"getSetterParam",value:function(n,i){return n in this.converterMap?this.converterMap[n](i):i}},{key:"render",value:function(){return null}},{key:"instance",get:function(){return this.marker}}]),u}(_.default.Component);h.default=(0,O.default)(e)},52891:function(m,h,s){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var y=function(){function T(x,w){for(var c=0;c<w.length;c++){var o=w[c];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(x,o.key,o)}}return function(x,w,c){return w&&T(x.prototype,w),c&&T(x,c),x}}(),R=s(36047),k=E(R),_=s(55262),v=s(16198),P=E(v),A=s(92921),S=E(A),O=s(57107);function E(T){return T&&T.__esModule?T:{default:T}}function I(T,x){if(!(T instanceof x))throw new TypeError("Cannot call a class as a function")}function b(T,x){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:T}function d(T,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);T.prototype=Object.create(x&&x.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(T,x):T.__proto__=x)}if(typeof window!="undefined"){var a=`.amap_markers_pop_window{
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 8px;
    background: #fff;
    position: relative;
    display: flex;
    flex-wrap: wrap;
    justify-content: flex-start;
}
.amap_markers_pop_window::before{
    content: ' ';
    display: block;
    position: absolute;
    bottom: -12px;
    left: 50%;
    margin-left: -7px;
    width: 0;
    height: 0;
    border-top: 12px solid #ddd;
    border-left: 7px solid transparent;
    border-right: 7px solid transparent;
}
.amap_markers_pop_window::after{
    content: ' ';
    display: block;
    position: absolute;
    bottom: -11px;
    left: 50%;
    margin-left: -6px;
    width: 0;
    height: 0;
    border-top: 11px solid #fff;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
}
.amap_markers_pop_window_item{
    cursor:pointer;
    width: 40px;
    height: 50px;
    display: flex;
    align-items: flex-end;
    justify-content: center;
}
.amap_markers_pop_window_item span{
    pointer-events: none;
}
.amap_markers_window_overflow_warning{
    text-align: center;
    width: 100%;
    margin: 5px 0;
    color: #666;
}`,f=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",e.textContent=a,f.appendChild(e)}var t=k.default.Component,u=.8,r=32*u,n=46*u-2,i=46*u,l=66*u-2,g=42,C={useCluster:!1,markersCache:[],markerIDCache:[]},W=["gridSize","minClusterSize","maxZoom","averageCenter","styles","zoomOnClick","renderCluserMarker"],B="__react_amap__",N=function(T){d(x,T);function x(w){I(this,x);var c=b(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,w));return typeof window!="undefined"&&(w.__map__?(c.map=w.__map__,c.element=c.map.getContainer(),c.markersCache=C.markersCache,c.useCluster=null,c.markerIDCache=C.markerIDCache,c.resetOffset=new window.AMap.Pixel(-r/2,-n),c.hoverOffset=new window.AMap.Pixel(-i/2,-l),c.createMarkers(w)):S.default.warning("MAP_INSTANCE_REQUIRED")),c}return y(x,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"createMarkers",value:function(c){var o=this,p=c.markers||[],M=[],D={};p.length&&p.forEach(function(j,U){var L=o.buildCreateOptions(c,j,U);L.map=o.map;var F=null;if((0,P.default)(c.render)){var z=c.render(j);if(z!==!1){var Q=document.createElement("div");Q.setAttribute(B,"1"),F=Q,D[U]=z}}if(!F){F=document.createElement("div");var G=document.createElement("img");G.src="//webapi.amap.com/theme/v1.3/markers/n/mark_bs.png",F.appendChild(G)}L.content=F;var H=new window.AMap.Marker(L);H.on("click",function(V){o.onMarkerClick(V)}),H.on("mouseover",function(V){o.onMarkerHover(V)}),H.on("mouseout",function(V){o.onMarkerHoverOut(V)}),H.render=function(V){return function(Z){return(0,O.renderMarkerComponent)(Z,V)}}(H),o.bindMarkerEvents(H),M.push(H)}),this.markersCache=M,this.markerReactChildDOM=D,this.exposeMarkerInstance(),this.checkClusterSettings(c)}},{key:"checkClusterSettings",value:function(c){var o=this;if(c.useCluster)this.loadClusterPlugin(c.useCluster).then(function(M){M.setMarkers(o.markersCache)});else if(this.mapCluster){var p=this.mapCluster.getMarkers();this.mapCluster.clearMarkers(),p.forEach(function(M){M.setMap(o.map)})}}},{key:"componentDidMount",value:function(){this.map&&this.setMarkerChild()}},{key:"setMarkerChild",value:function(){var c=this;Object.keys(this.markerReactChildDOM).forEach(function(o){var p=c.markersCache[o].getContent(),M=c.markerReactChildDOM[o];c.renderMarkerChild(p,M)})}},{key:"renderMarkerChild",value:function(c,o){(0,_.render)(k.default.createElement("div",null,o),c)}},{key:"buildCreateOptions",value:function(c,o,p){var M={},D=["extData"];return O.MarkerAllProps.forEach(function(j){if(j in o&&D.indexOf(j)===-1)M[j]=(0,O.getPropValue)(j,o[j]);else if(j in c)if((0,P.default)(c[j])){var U=c[j].call(null,o,p);M[j]=(0,O.getPropValue)(j,U)}else M[j]=(0,O.getPropValue)(j,c[j])}),M.extData=o,M}},{key:"componentWillReceiveProps",value:function(c){this.map&&this.refreshMarkersLayout(c)}},{key:"refreshMarkersLayout",value:function(c){var o=c.markers!==this.props.markers,p=!!this.props.useCluster!=!!c.useCluster;o&&(this.markersCache.length&&this.markersCache.forEach(function(M){M&&(M.setMap(null),M=null)}),this.markersCache=C.markersCache,this.createMarkers(c),this.setMarkerChild()),(o||p)&&this.markersWindow&&this.markersWindow.close(),p&&this.checkClusterSettings(c)}},{key:"loadClusterPlugin",value:function(c){var o=this;if(this.mapCluster)return Promise.resolve(this.mapCluster);var p=typeof c=="boolean"?{}:c;return new Promise(function(M){o.map.plugin(["AMap.MarkerClusterer"],function(){M(o.createClusterPlugin(p))})})}},{key:"createClusterPlugin",value:function(c){var o={},p={minClusterSize:2,zoomOnClick:!1,maxZoom:18,gridSize:60,averageCenter:!0};W.forEach(function(D){D in c?o[D]=c[D]:o[D]=p[D]}),this.mapCluster=new window.AMap.MarkerClusterer(this.map,[],o);var M={};return"events"in c&&(M=c.events,"created"in M&&M.created(this.mapCluster)),this.initClusterMarkerWindow(),this.bindClusterEvent(M),this.mapCluster}},{key:"onMarkerClick",value:function(c){var o=c.target;this.triggerMarkerClick(c,o)}},{key:"onMarkerHover",value:function(c){c.target.setTop(!0),this.setMarkerHovered(c,c.target)}},{key:"onMarkerHoverOut",value:function(c){c.target.setTop(!1),this.setMarkerHoverOut(c,c.target)}},{key:"onWindowMarkerClick",value:function(c){var o=c.markerRef;this.triggerMarkerClick(null,o)}},{key:"onWindowMarkerHover",value:function(c){var o=c.markerRef;this.setMarkerHovered(null,o)}},{key:"onWindowMarkerHoverOut",value:function(c){var o=c.markerRef;this.setMarkerHoverOut(null,o)}},{key:"setMarkerHovered",value:function(c,o){this.triggerMarkerHover(c,o)}},{key:"setMarkerHoverOut",value:function(c,o){this.triggerMarkerHoverOut(c,o)}},{key:"triggerMarkerClick",value:function(c,o){var p=this.props.events||{};(0,P.default)(p.click)&&p.click(c,o)}},{key:"triggerMarkerHover",value:function(c,o){var p=this.props.events||{};(0,P.default)(p.mouseover)&&p.mouseover(c,o)}},{key:"triggerMarkerHoverOut",value:function(c,o){var p=this.props.events||{};(0,P.default)(p.mouseout)&&p.mouseout(c,o)}},{key:"initClusterMarkerWindow",value:function(){this.markersWindow=new window.AMap.InfoWindow({isCustom:!0,autoMove:!0,closeWhenClickMap:!0,content:"<span>loading...</span>",showShadow:!1,offset:new window.AMap.Pixel(0,-20)}),this.markersDOM=document.createElement("div"),this.markersDOM.className="amap_markers_pop_window",this.markersWindow.setContent(this.markersDOM)}},{key:"bindClusterEvent",value:function(c){var o=this;this.mapCluster.on("click",function(p){if(!(o.props.useCluster&&o.props.useCluster.zoomOnClick)){var M=!0;(0,P.default)(c.click)&&(M=c.click(p)),M!==!1&&o.showMarkersInfoWindow(p)}})}},{key:"showMarkersInfoWindow",value:function(c){var o=this,p=c.lnglat,M=c.markers;if(this.markersDOM.innerHTML="",M&&M.length){var D=M.length;if(D>g&&(M=M.slice(0,g)),M.forEach(function(U){var L=U.getContent(),F=document.createElement("div");F.className="window_marker_item",F.appendChild(L),F.markerRef=U,F.addEventListener("click",o.onWindowMarkerClick.bind(o,F),!0),F.addEventListener("mouseover",o.onWindowMarkerHover.bind(o,F),!0),F.addEventListener("mouseout",o.onWindowMarkerHoverOut.bind(o,F),!0),o.markersDOM.appendChild(F)}),D>g){var j=document.createElement("div");j.className="amap_markers_window_overflow_warning",j.innerText="\u66F4\u591A\u5750\u6807\u8BF7\u653E\u5927\u5730\u56FE\u67E5\u770B",this.markersDOM.appendChild(j)}}this.markersWindow.open(this.map,p)}},{key:"exposeMarkerInstance",value:function(){if("events"in this.props){var c=this.props.events||{};(0,P.default)(c.created)&&c.created(this.markersCache)}}},{key:"bindMarkerEvents",value:function(c){var o=this.props.events||{},p=Object.keys(o),M=["click","mouseover","mouseout","created"];p.length&&p.forEach(function(D){M.indexOf(D)===-1&&c.on(D,o[D])})}},{key:"render",value:function(){return null}}]),x}(t);h.default=N},74328:function(m,h,s){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var y=function(){function d(a,f){for(var e=0;e<f.length;e++){var t=f[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,t.key,t)}}return function(a,f,e){return f&&d(a.prototype,f),e&&d(a,e),a}}(),R=s(36047),k=S(R),_=s(14738),v=S(_),P=s(92921),A=S(P);function S(d){return d&&d.__esModule?d:{default:d}}function O(d,a){if(!(d instanceof a))throw new TypeError("Cannot call a class as a function")}function E(d,a){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:d}function I(d,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);d.prototype=Object.create(a&&a.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(d,a):d.__proto__=a)}var b=function(d){I(a,d);function a(f){O(this,a);var e=E(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,f));return typeof window!="undefined"&&(f.__map__?(e.map=f.__map__,e.loadToolInstance().then(function(){e.props.onInstanceCreated&&e.props.onInstanceCreated()})):A.default.warning("MAP_INSTANCE_REQUIRED")),e}return y(a,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"loadToolInstance",value:function(){var e=this;return new Promise(function(t){e.map.plugin(["AMap.MouseTool"],function(){e.tool=new window.AMap.MouseTool(e.map),t()})})}},{key:"render",value:function(){return null}},{key:"instance",get:function(){return this.tool}}]),a}(k.default.Component);h.default=(0,v.default)(b)},32406:function(m,h,s){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var y=function(){function d(a,f){for(var e=0;e<f.length;e++){var t=f[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,t.key,t)}}return function(a,f,e){return f&&d(a.prototype,f),e&&d(a,e),a}}(),R=s(36047),k=S(R),_=s(14738),v=S(_),P=s(92921),A=S(P);function S(d){return d&&d.__esModule?d:{default:d}}function O(d,a){if(!(d instanceof a))throw new TypeError("Cannot call a class as a function")}function E(d,a){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:d}function I(d,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);d.prototype=Object.create(a&&a.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(d,a):d.__proto__=a)}var b=function(d){I(a,d);function a(f){O(this,a);var e=E(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,f));if(typeof window!="undefined")if(!(f.__map__&&f.__poly__))A.default.warning("MAP_INSTANCE_REQUIRED");else{var t=e;e.setterMap={active:function(r){t.toggleActive(r)}},e.map=f.__map__,e.poly=f.__poly__,e.editorActive=!1,e.createEditorInstance().then(function(){e.props.onInstanceCreated&&e.props.onInstanceCreated()})}return e}return y(a,[{key:"toggleActive",value:function(e){e?this.editorActive||this.activeEditor():this.editorActive&&this.inactiveEditor()}},{key:"activeEditor",value:function(){this.polyEditor&&(this.editorActive=!0,this.polyEditor.open())}},{key:"inactiveEditor",value:function(){this.editorActive=!1,this.polyEditor&&this.polyEditor.close()}},{key:"createEditorInstance",value:function(){var e=this;return this.polyEditor?Promise.resolve(this.polyEditor):new Promise(function(t){e.map.plugin(["AMap.PolyEditor"],function(){e.polyEditor=new window.AMap.PolyEditor(e.map,e.poly),t(e.polyEditor)})})}},{key:"render",value:function(){return null}},{key:"instance",get:function(){return this.polyEditor}}]),a}(k.default.Component);h.default=(0,v.default)(b)},52693:function(m,h,s){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var y=function(){function u(r,n){for(var i=0;i<n.length;i++){var l=n[i];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(r,l.key,l)}}return function(r,n,i){return n&&u(r.prototype,n),i&&u(r,i),r}}(),R=s(36047),k=I(R),_=s(14738),v=I(_),P=s(92921),A=I(P),S=s(32406),O=I(S),E=s(77162);function I(u){return u&&u.__esModule?u:{default:u}}function b(u,r){if(!(u instanceof r))throw new TypeError("Cannot call a class as a function")}function d(u,r){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:u}function a(u,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);u.prototype=Object.create(r&&r.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(u,r):u.__proto__=r)}var f=["path","draggable","extData","style","visible"],e=f.concat(["zIndex","bubble"]),t=function(u){a(r,u);function r(n){b(this,r);var i=d(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,n));if(typeof window!="undefined")if(!n.__map__)A.default.warning("MAP_INSTANCE_REQUIRED");else{var l=i;i.setterMap={visible:function(C){C?l.polygon&&l.polygon.show():l.polygon&&l.polygon.hide()},style:function(C){l.polygon.setOptions(C)}},i.converterMap={path:function(C){return l.buildPathValue(C)}},i.state={loaded:!1},i.map=n.__map__,i.element=i.map.getContainer(),setTimeout(function(){i.initMapPolygon(n)},13)}return i}return y(r,[{key:"initMapPolygon",value:function(i){var l=this.buildCreateOptions(i);l.map=this.map,this.polygon=new window.AMap.Polygon(l),this.setState({loaded:!0}),this.props.onInstanceCreated&&this.props.onInstanceCreated()}},{key:"buildCreateOptions",value:function(i){var l=this,g={};return e.forEach(function(C){if(C in i)if(C==="style"&&i.style){var W=Object.keys(i.style);W.forEach(function(B){g[B]=i.style[B]})}else C!=="visible"&&(g[C]=l.getSetterValue(C,i[C]))}),g}},{key:"detectPropChanged",value:function(i,l){return this.props[i]!==l[i]}},{key:"getSetterValue",value:function(i,l){return i in this.converterMap?this.converterMap[i](l):l}},{key:"buildPathValue",value:function(i){var l=this;if(i.length){var g=i[0];if(typeof g[0]=="number")return i.map(function(C){return(0,E.toLnglat)(C)});if("getLng"in g)return i;if("longitude"in g||"lng"in g)return i.map(function(C){return(0,E.toLnglat)(C)});if("length"in g&&g.length)return i.map(function(C){return l.buildPathValue(C)})}return[]}},{key:"renderEditor",value:function(i){if(!i||k.default.Children.count(i)!==1)return null;var l=k.default.Children.only(i);return l.type===O.default?k.default.cloneElement(l,{__poly__:this.polygon,__map__:this.map}):null}},{key:"render",value:function(){return this.state.loaded?this.renderEditor(this.props.children):null}},{key:"instance",get:function(){return this.polygon}}]),r}(R.Component);h.default=(0,v.default)(t)},52446:function(m,h,s){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var y=function(){function r(n,i){for(var l=0;l<i.length;l++){var g=i[l];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(n,g.key,g)}}return function(n,i,l){return i&&r(n.prototype,i),l&&r(n,l),n}}(),R=s(36047),k=I(R),_=s(14738),v=I(_),P=s(92921),A=I(P),S=s(32406),O=I(S),E=s(77162);function I(r){return r&&r.__esModule?r:{default:r}}function b(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function d(r,n){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:r}function a(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}var f=k.default.Component,e=["path","extData","draggable","visible","style"],t=e.concat(["zIndex","bubble","showDir"]),u=function(r){a(n,r);function n(i){b(this,n);var l=d(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,i));if(typeof window!="undefined")if(!i.__map__)A.default.warning("MAP_INSTANCE_REQUIRED");else{var g=l;l.setterMap={visible:function(W){W?g.polyline&&g.polyline.show():g.polyline&&g.polyline.hide()},style:function(W){g.polyline.setOptions(W)}},l.converterMap={path:function(W){return g.buildPathValue(W)}},l.state={loaded:!1},l.map=i.__map__,l.element=l.map.getContainer(),setTimeout(function(){l.createMapPolyline(i)},13)}return l}return y(n,[{key:"createMapPolyline",value:function(l){var g=this.buildCreateOptions(l);g.map=this.map,this.polyline=new window.AMap.Polyline(g),this.setState({loaded:!0}),this.props.onInstanceCreated&&this.props.onInstanceCreated()}},{key:"buildCreateOptions",value:function(l){var g=this,C={};return t.forEach(function(W){if(W in l)if(W==="style"&&l.style){var B=Object.keys(l.style);B.forEach(function(N){C[N]=l.style[N]})}else W!=="visible"&&(C[W]=g.getSetterValue(W,l[W]))}),C}},{key:"detectPropChanged",value:function(l,g){return this.props[l]!==g[l]}},{key:"getSetterValue",value:function(l,g){return l in this.converterMap?this.converterMap[l](g):g}},{key:"buildPathValue",value:function(l){return l.length?"getLng"in l[0]?l:l.map(function(g){return(0,E.toLnglat)(g)}):l}},{key:"renderEditor",value:function(l){if(!l||k.default.Children.count(l)!==1)return null;var g=k.default.Children.only(l);return g.type===O.default?k.default.cloneElement(g,{__poly__:this.polyline,__map__:this.map}):null}},{key:"render",value:function(){return this.state.loaded?this.renderEditor(this.props.children):null}},{key:"instance",get:function(){return this.polyline}}]),n}(f);h.default=(0,v.default)(u)},76953:function(m,h){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var s=Object.assign||function(S){for(var O=1;O<arguments.length;O++){var E=arguments[O];for(var I in E)Object.prototype.hasOwnProperty.call(E,I)&&(S[I]=E[I])}return S},y=function(){function S(O,E){for(var I=0;I<E.length;I++){var b=E[I];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(O,b.key,b)}}return function(O,E,I){return E&&S(O.prototype,E),I&&S(O,I),O}}();function R(S,O){if(!(S instanceof O))throw new TypeError("Cannot call a class as a function")}var k={v:"1.4.0",hostAndPath:"webapi.amap.com/maps",key:"f97efc35164149d0c0f299e7a8adb3d2",callback:"__amap_init_callback",useAMapUI:!1},_=null,v=null,P=!1,A=function(){function S(O){var E=O.key,I=O.useAMapUI,b=O.version,d=O.protocol;R(this,S),this.config=s({},k,{useAMapUI:I,protocol:d}),typeof window!="undefined"&&(E?this.config.key=E:"amapkey"in window&&(this.config.key=window.amapkey)),b&&(this.config.v=b),this.protocol=d||window.location.protocol,this.protocol.indexOf(":")===-1&&(this.protocol+=":")}return y(S,[{key:"getScriptSrc",value:function(E){return this.protocol+"//"+E.hostAndPath+"?v="+E.v+"&key="+E.key+"&callback="+E.callback}},{key:"buildScriptTag",value:function(E){var I=document.createElement("script");return I.type="text/javascript",I.async=!0,I.defer=!0,I.src=E,I}},{key:"getAmapuiPromise",value:function(){var E=this.buildScriptTag(this.protocol+"//webapi.amap.com/ui/1.0/main-async.js"),I=new Promise(function(b){E.onload=function(){b()}});return document.body.appendChild(E),I}},{key:"getMainPromise",value:function(){var E=this,I=this.buildScriptTag(this.getScriptSrc(this.config)),b=new Promise(function(d){window[E.config.callback]=function(){d(),delete window[E.config.callback]}});return document.body.appendChild(I),b}},{key:"load",value:function(){if(typeof window=="undefined")return null;var E=this.config.useAMapUI;return _=_||this.getMainPromise(),E&&(v=v||this.getAmapuiPromise()),new Promise(function(I){_.then(function(){E&&v?v.then(function(){window.initAMapUI&&!P&&(window.initAMapUI(),typeof E=="function"&&E(),P=!0),I()}):I()})})}}]),S}();h.default=A},77162:function(m,h){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var s=typeof window!="undefined",y=h.toLnglat=function(v){if(!v||"getLng"in v&&"getLat"in v)return v;var P=0,A=0;return{}.toString.call(v)==="[object Array]"?(P=v[0],A=v[1]):"lng"in v&&"lat"in v?(P=v.lng,A=v.lat):"longitude"in v&&"latitude"in v&&(P=v.longitude,A=v.latitude),s?new window.AMap.LngLat(P,A):null},R=h.toPixel=function(v){if(!v||"getX"in v&&"getY"in v)return v;var P=0,A=0;return{}.toString.call(v)==="[object Array]"?(P=v[0],A=v[1]):"x"in v&&"y"in v&&(P=v.x,A=v.y),s?new window.AMap.Pixel(P,A):null},k=h.toSize=function(v){return!v||"getWidth"in v?v:s?new window.AMap.Size(v.width,v.height):null};h.default={toLnglat:y,toPixel:R,toSize:k}},16198:function(m,h){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var s=function(R){return!!R&&typeof R=="function"};h.default=s},92921:function(m,h){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var s={MARKER_ID_CONFLICT:"Marker \u7684 id \u5C5E\u6027\u91CD\u590D",MARKER_ID_REQUIRED:"\u6BCF\u4E00\u4E2A Marker \u5FC5\u9700\u6709\u4E00\u4E2A id \u5C5E\u6027",MAP_INSTANCE_REQUIRED:"\u6CA1\u6709\u5730\u56FE\u5B9E\u4F8B\uFF1B\u7EC4\u4EF6\u5FC5\u987B\u4F5C\u4E3A Map \u7684\u5B50\u7EC4\u4EF6\u4F7F\u7528",CIRCLE_INSTANCE_REQUIRED:"",CIRCLE_CENTER_REQUIRED:"Circle \u7EC4\u4EF6\u5FC5\u9700\u8BBE\u7F6E center \u5C5E\u6027",CIRCLE_RADIUS_REQUIRED:"Circle \u7EC4\u4EF6\u5FC5\u9700\u8BBE\u7F6E radius \u5C5E\u6027",SRC_REQUIRED:"GroundImage \u7EC4\u4EF6\u5FC5\u9700\u8BBE\u7F6E src \u5C5E\u6027",BOUNDS_REQUIRED:"GroundImage \u7EC4\u4EF6\u5FC5\u9700\u8BBE\u7F6E bounds \u5C5E\u6027",WINDOW_POSITION_REQUIRED:"InfoWindow \u7EC4\u4EF6\u5FC5\u9700\u8BBE\u7F6E position \u5C5E\u6027",INVALID_AMAP_PLUGIN:"plugins \u5C5E\u6027\u4E0D\u6B63\u786E\uFF1B\u76EE\u524D\u652F\u6301\u7684\u63D2\u4EF6\u6709'Scale', 'ToolBar', 'MapType', 'OverView'"},y=function(_){return _ in s?s[_]:_},R={error:function(_){throw new Error(y(_))},warning:function(_){console.warn(y(_))},optimize:function(_){console.log("%c"+y(_),"color:#d4d483;border-left: 2px solid #d4d483;padding-left: 4px;")}};h.default=R},57107:function(m,h,s){"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.renderMarkerComponent=h.getPropValue=h.MarkerAllProps=h.MarkerConfigurableProps=void 0;var y=s(77162),R=s(36047),k=A(R),_=s(55262),v=s(16198),P=A(v);function A(b){return b&&b.__esModule?b:{default:b}}var S=h.MarkerConfigurableProps=["position","offset","icon","content","draggable","visible","zIndex","angle","animation","shadow","title","clickable","extData","label"],O=h.MarkerAllProps=S.concat(["topWhenClick","bubble","raiseOnDrag","cursor","autoRotation","shape"]),E=h.getPropValue=function(d,a){return O.indexOf(d)===-1?null:d==="position"?(0,y.toLnglat)(a):d==="offset"?(0,y.toPixel)(a):a},I=h.renderMarkerComponent=function(d,a){var f=d;if((0,P.default)(d)){var e=a.getExtData();f=d(e)}f&&(0,_.render)(k.default.createElement("div",null,f),a.getContent())}},63549:function(m,h){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var s=function(R){return R[0].toUpperCase()+R.slice(1,R.length)};h.default=s},14738:function(m,h,s){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var y=Object.assign||function(b){for(var d=1;d<arguments.length;d++){var a=arguments[d];for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(b[f]=a[f])}return b},R=function(){function b(d,a){for(var f=0;f<a.length;f++){var e=a[f];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(d,e.key,e)}}return function(d,a,f){return a&&b(d.prototype,a),f&&b(d,f),d}}(),k=s(36047),_=A(k),v=s(63549),P=A(v);function A(b){return b&&b.__esModule?b:{default:b}}function S(b,d){if(!(b instanceof d))throw new TypeError("Cannot call a class as a function")}function O(b,d){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:b}function E(b,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);b.prototype=Object.create(d&&d.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(b,d):b.__proto__=d)}function I(b){return function(d){E(a,d);function a(f){S(this,a);var e=O(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,f));return e.instanceCreated=!1,e.myMapComponent=null,e.registeredEvents=[],e.onInstanceCreated=e.onInstanceCreated.bind(e),e}return R(a,[{key:"onInstanceCreated",value:function(){if(this.instanceCreated=!0,"events"in this.props){var e=this.myMapComponent.instance;this.props.events.created&&this.props.events.created(e)}this.reactivePropChange(this.props,!1)}},{key:"createEventsProxy",value:function(e){var t=this,u=this.myMapComponent.instance,r=Object.keys(e.events||{});r.length&&r.forEach(function(n){t.registeredEvents.indexOf(n)===-1&&(t.registeredEvents.push(n),u.on(n,function(i){return function(){if(t.props.events&&i in t.props.events){for(var l=arguments.length,g=Array(l),C=0;C<l;C++)g[C]=arguments[C];t.props.events[i].apply(null,g)}}}(n)))})}},{key:"componentWillReceiveProps",value:function(e){this.reactivePropChange(e,!0)}},{key:"reactivePropChange",value:function(e){var t=this,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!this.instanceCreated)return!1;var r=this.myMapComponent,n=r.setterMap,i=n===void 0?{}:n,l=r.converterMap,g=l===void 0?{}:l,C=r.instance,W=C===void 0?{}:C,B=Object.keys(e);B.length&&B.forEach(function(N){if(N==="events")return t.createEventsProxy(e);var T=!0;if(u&&(T=t.detectPropChange(N,e,t.props)),!T)return!1;var x=e[N];if(N in g&&(x=g[N](e[N])),N in i)i[N](x);else{var w="set"+(0,P.default)(N);w in W&&W[w](x)}})}},{key:"detectPropChange",value:function(e,t,u){return t[e]!==u[e]}},{key:"render",value:function(){var e=this;return _.default.createElement(b,y({onInstanceCreated:this.onInstanceCreated,ref:function(u){e.myMapComponent=u}},this.props))}},{key:"componentWillUnmount",value:function(){var e=this.myMapComponent.instance;e&&("destroy"in e&&setTimeout(function(){e.destroy()},10),"hide"in e&&e.hide(),"__map__"in this.props&&"setMap"in e&&e.setMap(null))}}]),a}(_.default.Component)}h.default=I},70611:function(m){function h(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}m.exports=h,m.exports.__esModule=!0,m.exports.default=m.exports},80044:function(m){function h(s,y){if(!(s instanceof y))throw new TypeError("Cannot call a class as a function")}m.exports=h,m.exports.__esModule=!0,m.exports.default=m.exports},58518:function(m,h,s){var y=s(86671);function R(_,v){for(var P=0;P<v.length;P++){var A=v[P];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(_,y(A.key),A)}}function k(_,v,P){return v&&R(_.prototype,v),P&&R(_,P),Object.defineProperty(_,"prototype",{writable:!1}),_}m.exports=k,m.exports.__esModule=!0,m.exports.default=m.exports},58879:function(m,h,s){var y=s(53107),R=s(15592),k=s(47131);function _(v){var P=R();return function(){var S=y(v),O;if(P){var E=y(this).constructor;O=Reflect.construct(S,arguments,E)}else O=S.apply(this,arguments);return k(this,O)}}m.exports=_,m.exports.__esModule=!0,m.exports.default=m.exports},53107:function(m){function h(s){return m.exports=h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(R){return R.__proto__||Object.getPrototypeOf(R)},m.exports.__esModule=!0,m.exports.default=m.exports,h(s)}m.exports=h,m.exports.__esModule=!0,m.exports.default=m.exports},48234:function(m,h,s){var y=s(21902);function R(k,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(_&&_.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),Object.defineProperty(k,"prototype",{writable:!1}),_&&y(k,_)}m.exports=R,m.exports.__esModule=!0,m.exports.default=m.exports},15592:function(m){function h(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}m.exports=h,m.exports.__esModule=!0,m.exports.default=m.exports},10255:function(m){function h(s){if(s==null)throw new TypeError("Cannot destructure "+s)}m.exports=h,m.exports.__esModule=!0,m.exports.default=m.exports},38425:function(m,h,s){var y=s(68277);function R(k,_){if(k==null)return{};var v=y(k,_),P,A;if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(k);for(A=0;A<S.length;A++)P=S[A],!(_.indexOf(P)>=0)&&Object.prototype.propertyIsEnumerable.call(k,P)&&(v[P]=k[P])}return v}m.exports=R,m.exports.__esModule=!0,m.exports.default=m.exports},68277:function(m){function h(s,y){if(s==null)return{};var R={},k=Object.keys(s),_,v;for(v=0;v<k.length;v++)_=k[v],!(y.indexOf(_)>=0)&&(R[_]=s[_]);return R}m.exports=h,m.exports.__esModule=!0,m.exports.default=m.exports},47131:function(m,h,s){var y=s(4620).default,R=s(70611);function k(_,v){if(v&&(y(v)==="object"||typeof v=="function"))return v;if(v!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R(_)}m.exports=k,m.exports.__esModule=!0,m.exports.default=m.exports},21902:function(m){function h(s,y){return m.exports=h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(k,_){return k.__proto__=_,k},m.exports.__esModule=!0,m.exports.default=m.exports,h(s,y)}m.exports=h,m.exports.__esModule=!0,m.exports.default=m.exports}}]);
