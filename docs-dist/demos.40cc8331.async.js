(self.webpackChunkperfect_map=self.webpackChunkperfect_map||[]).push([[433],{20539:function(t,f,e){"use strict";e.r(f);var m=e(36047),l=e(7596),i=e(17210),a=function(){return(0,i.jsx)(l._F,{akay:"a7a90e05a37d3f6bf76d4a9032fc9129",children:(0,i.jsx)(l.D5,{style:{height:300}})})};f.default=a},93289:function(t,f,e){"use strict";e.r(f);var m=e(36047),l=e(7596),i=e(17210);function a(){var v=(0,m.useRef)();return(0,i.jsx)("div",{style:{height:"300px"},children:(0,i.jsx)(l._F,{akay:"9ba7e2f5c979b67281c5833918d6dfa0",plugin:"AMap.Driving",children:(0,i.jsx)(l.D5,{ref:v})})})}f.default=a},70911:function(t,f,e){"use strict";e.r(f);var m=e(36047),l=e(7596),i=e(17210);function a(){return(0,i.jsx)("div",{style:{height:"300px"},children:(0,i.jsx)(l._F,{akay:"9ba7e2f5c979b67281c5833918d6dfa0",plugin:"AMap.Driving",children:(0,i.jsx)(l.D5,{center:[116.397428,39.90923],mapStyle:"amap://styles/darkblue"})})})}f.default=a},62986:function(t,f,e){"use strict";e.r(f);var m=e(36047),l=e(7596),i=e(17210),a=function(){var u=(0,l.fx)(),A=u.map;return(0,m.useEffect)(function(){A&&(console.log(AMap.Driving),AMap.plugin(["AMap.Driving"],function(){var C=new AMap.Driving({policy:AMap.DrivingPolicy.LEAST_TIME,map:A}),L=[116.379028,39.865042],B=[116.427281,39.903719],U=[{keyword:"\u5317\u4EAC\u5E02\u5730\u9707\u5C40\uFF08\u516C\u4EA4\u7AD9\uFF09",city:"\u5317\u4EAC"},{keyword:"\u4EA6\u5E84\u6587\u5316\u56ED\uFF08\u5730\u94C1\u7AD9\uFF09",city:"\u5317\u4EAC"}];C.search(L,B,function(K,j){})}))},[A]),null};function v(){return(0,i.jsx)("div",{style:{height:"300px"},children:(0,i.jsx)(l._F,{akay:"9ba7e2f5c979b67281c5833918d6dfa0",plugin:"AMap.Driving",children:(0,i.jsx)(l.D5,{center:[116.397428,39.90923],children:(0,i.jsx)(a,{})})})})}f.default=v},7596:function(t,f,e){"use strict";e.d(f,{_F:function(){return de},D5:function(){return V},fx:function(){return G}});var m=e(38425),l=e.n(m),i=e(76091),a=e.n(i),v=e(7863),g=e.n(v),u=e(36047),A=e(10255),C=e.n(A);function L(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];p.forEach(function(h){var n="set".concat(h),o="".concat(h.charAt(0).toLowerCase()).concat(h.slice(1)),s=(0,u.useState)(r[o]),y=g()(s,2),P=y[0],M=y[1];(0,u.useEffect)(function(){c&&r[o]!==void 0&&r[o]!==P&&c[n]&&typeof c[n]=="function"&&(c[n](r[o]),M(r[o]))},[c,r[o]])})}function B(c){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],h=arguments.length>3?arguments[3]:void 0;p.forEach(function(n){var o=n,s=r[o];(0,u.useEffect)(function(){if(c){var y=n.toLocaleLowerCase().replace(/^on/,"");return s&&y&&c.on(y,s),function(){y&&s&&c.off(y,s)}}},[c,r[o]])})}var U=B,K=e(39620),j=e.n(K);function H(c){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];p.forEach(function(h){var n=h,o=(0,u.useState)(r[n]),s=g()(o,2),y=s[0],P=s[1];(0,u.useEffect)(function(){if(c&&r[n]!==void 0&&r[n]!==y){var M=c.getStatus();c.setStatus(a()(a()({},M),{},j()({},n,r[n]))),P(r[n])}},[c,r[n]])})}var F={map:void 0,AMap:void 0,container:void 0},Q=function(r,p){return a()(a()({},r),p)},W=u.createContext({state:F,dispatch:function(){return null}});function G(){var c=(0,u.useContext)(W),r=c.state,p=c.dispatch;return a()(a()({},r),{},{state:r,dispatch:p})}var he={zoom:1},Y=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=Object.assign({},(C()(r),r)),h=(0,u.useState)(),n=g()(h,2),o=n[0],s=n[1],y=(0,u.useState)(r.zoom||15),P=g()(y,2),M=P[0],O=P[1],D=(0,u.useState)(r.container),T=g()(D,2),d=T[0],b=T[1],E=(0,u.useContext)(W),S=E.dispatch;return(0,u.useEffect)(function(){if(d&&!o&&AMap){d.className=d.className+" react-amap-wapper";var k=new AMap.Map(d,a()({zoom:M},p));s(k)}return function(){o&&(o.clearInfoWindow(),o.clearLimitBounds(),o.clearMap(),o.destroy(),s(void 0))}},[d,o]),(0,u.useEffect)(function(){return o&&d&&S({map:o,container:d,AMap}),function(){S({map:void 0,container:void 0,AMap:void 0})}},[o,d]),(0,u.useMemo)(function(){o&&typeof r.zoom=="number"&&M!==r.zoom&&r.zoom>=2&&r.zoom<=20&&(O(r.zoom),o.setZoom(r.zoom))},[M,r.zoom]),(0,u.useMemo)(function(){r.center&&o&&o.setCenter(r.center)},[o,r.center]),H(o,r,["dragEnable","zoomEnable","jogEnable","pitchEnable","rotateEnable","animateEnable","keyboardEnable"]),L(o,r,["Zoom","LabelzIndex","Layers","City","Bounds","LimitBounds","Lang","Rotation","DefaultCursor","MapStyle","Features","DefaultLayer","Pitch"]),U(o,r,["onMouseMove","onZoomChange","onMapMove","onMouseWheel","onZoomStart","onMouseOver","onMouseOut","onDblClick","onClick","onZoomEnd","onMoveEnd","onMouseUp","onMouseDown","onRightClick","onMoveStart","onDragStart","onDragging","onDragEnd","onHotspotOut","onHotspotOver","onTouchStart","onComplete","onHotspotClick","onTouchMove","onTouchEnd","onResize"]),{map:o,setMap:s,zoom:M,setZoom:O,container:d,setContainer:b}},w=e(17210),$=["className","children"],me=function(r){var p=useReducer(reducer,initialState),h=_slicedToArray(p,2),n=h[0],o=h[1];return _jsx(Context.Provider,{value:_objectSpread(_objectSpread({},n),{},{state:n,dispatch:o}),children:r.children})},J=(0,u.forwardRef)(function(c,r){var p=c.className,h=c.children,n=l()(c,$),o=(0,u.useReducer)(Q,F),s=g()(o,2),y=s[0],P=s[1],M=(0,u.useRef)(null),O=Y(a()({container:n.container||M.current},n)),D=O.setContainer,T=O.container,d=O.map;(0,u.useEffect)(function(){return D(M.current)},[M.current]),(0,u.useImperativeHandle)(r,function(){return a()(a()({},n),{},{map:d,AMap,container:n.container||M.current})},[d]);var b=u.Children.toArray(h);return(0,u.useEffect)(function(){d&&P({map:d,container:M.current,AMap})},[d]),(0,w.jsxs)(W.Provider,{value:a()(a()({},y),{},{state:y,dispatch:P}),children:[!n.container&&(0,w.jsx)("div",{ref:M,className:"react-amap-wapper ".concat(p),style:a()({fontSize:1,width:"100%",height:"100%"},n.style)}),AMap&&d&&typeof h=="function"&&h({AMap,map:d,container:T}),AMap&&d&&b.map(function(E,S){return(0,u.isValidElement)(E)?typeof E=="string"?(0,u.cloneElement)((0,w.jsx)(u.Fragment,{children:E}),{key:S}):E.type&&typeof E.type=="string"?(0,u.cloneElement)(E,{key:S}):(0,u.cloneElement)(E,a()(a()({},E.props),{},{AMap,map:d,container:T,key:S})):null})]})}),V=J,X=e(84019),I=e.n(X),_=e(4620),q=e.n(_),ee=e(32061),te=e.n(ee),ne=e(80044),re=e.n(ne),ae=e(58518),oe=e.n(ae),ue=e(70611),R=e.n(ue),se=e(48234),ie=e.n(se),ce=e(58879),fe=e.n(ce);function pe(c){return new Promise(function(r,p){window.setTimeout(r,c)})}var Z=3,z=function(c){ie()(p,c);var r=fe()(p);function p(h){var n;if(re()(this,p),n=r.call(this,h),j()(R()(n),"isMountedOk",!1),j()(R()(n),"state",{loaded:!!window.AMap}),j()(R()(n),"handleError",function(o){n.isMountedOk&&R()(n).setState({error:o})}),j()(R()(n),"finish",function(){n.isMountedOk&&R()(n).setState({loaded:!0})}),h.akay===null)throw new TypeError("AMap: akay is required");return n}return oe()(p,[{key:"componentDidMount",value:function(){this.isMountedOk=!0;var n=this.props.callbackName;if(window.AMap==null){if(window[n]){p.waitQueue.push([this.finish,this.handleError]);return}this.loadMap()}}},{key:"componentWillUnmount",value:function(){this.isMountedOk=!1}},{key:"render",value:function(){return this.state.loaded?this.props.children:this.props.fallback?this.props.fallback(this.state.error):this.state.error?(0,w.jsx)("div",{style:{color:"red"},children:this.state.error.message}):null}},{key:"getScriptSrc",value:function(){var n=this.props,o=n.protocol||window.location.protocol;o.indexOf(":")===-1&&(o+=":");var s="";return n.plugin&&(s="&plugin=".concat(n.plugin)),"".concat(o,"//").concat(n.hostAndPath,"?v=").concat(n.version,"&key=").concat(n.akay,"&callback=").concat(n.callbackName).concat(s)}},{key:"loadMap",value:function(){var h=te()(I()().mark(function o(){var s=this,y,P,M,O,D;return I()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:y=this.props.callbackName,P=this.getScriptSrc(),window[y]=function(){var b=p.waitQueue;p.waitQueue=[],b.forEach(function(E){return E[0]()}),s.finish()},M=I()().mark(function b(){var E,S,k;return I()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.prev=0,E=document.createElement("script"),E.type="text/javascript",E.innerHTML=`
        window._AMapSecurityConfig = {
          securityJsCode:'c72061ac3536c85210f74ae2aa07f004',
      }`,document.head.appendChild(E),x.next=7,le(P);case 7:return x.abrupt("return","break");case 10:if(x.prev=10,x.t0=x.catch(0),O!==Z-1){x.next=19;break}return S=new Error("Failed to load AMap: ".concat(x.t0.message)),k=p.waitQueue,p.waitQueue=[],k.forEach(function(ve){return ve[1](S)}),s.handleError(S),x.abrupt("return",{v:void 0});case 19:return x.next=21,pe(O*1e3);case 21:case"end":return x.stop()}},b,null,[[0,10]])}),O=0;case 5:if(!(O<Z)){d.next=15;break}return d.delegateYield(M(),"t0",7);case 7:if(D=d.t0,D!=="break"){d.next=10;break}return d.abrupt("break",15);case 10:if(q()(D)!=="object"){d.next=12;break}return d.abrupt("return",D.v);case 12:O++,d.next=5;break;case 15:case"end":return d.stop()}},o,this)}));function n(){return h.apply(this,arguments)}return n}()}]),p}(u.Component);j()(z,"defaultProps",{protocol:/^file:/.test(window.location.protocol)?"https":window.location.protocol,akay:"",hostAndPath:"webapi.amap.com/maps",version:"2.0",callbackName:"load_amap_sdk",plugin:""}),j()(z,"waitQueue",[]);var N={};function ge(c){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"_react_amap_css",p=document&&(document.head||document.getElementsByTagName("head")[0]),h=document.getElementById(r);return new Promise(function(n,o){if(!document||c in N||h){n();return}var s=document.createElement("link");s.type="text/css",s.rel="stylesheet",s.id=r,s.href=c,s.onerror=function(y){p.removeChild(s),o(new URIError("The css ".concat(c," is no accessible.")))},s.onload=function(){N[c]=!0,n()},p.appendChild(s)})}function le(c){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"_react_amap_plugin",p=document&&(document.head||document.getElementsByTagName("head")[0]),h=document.getElementById(r);return new Promise(function(n,o){if(!document||c in N||h){n();return}var s=document.createElement("script");s.type="text/javascript",s.id=r,s.async=!0,s.defer=!0,s.src=c,s.onerror=function(y){p.removeChild(s),o(new URIError("The Script ".concat(c," is no accessible.")))},s.onload=function(){N[c]=!0,n()},p.appendChild(s)})}var de=z},70611:function(t){function f(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t.exports=f,t.exports.__esModule=!0,t.exports.default=t.exports},80044:function(t){function f(e,m){if(!(e instanceof m))throw new TypeError("Cannot call a class as a function")}t.exports=f,t.exports.__esModule=!0,t.exports.default=t.exports},58518:function(t,f,e){var m=e(86671);function l(a,v){for(var g=0;g<v.length;g++){var u=v[g];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,m(u.key),u)}}function i(a,v,g){return v&&l(a.prototype,v),g&&l(a,g),Object.defineProperty(a,"prototype",{writable:!1}),a}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},58879:function(t,f,e){var m=e(53107),l=e(15592),i=e(47131);function a(v){var g=l();return function(){var A=m(v),C;if(g){var L=m(this).constructor;C=Reflect.construct(A,arguments,L)}else C=A.apply(this,arguments);return i(this,C)}}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports},53107:function(t){function f(e){return t.exports=f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},t.exports.__esModule=!0,t.exports.default=t.exports,f(e)}t.exports=f,t.exports.__esModule=!0,t.exports.default=t.exports},48234:function(t,f,e){var m=e(21902);function l(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(a&&a.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),a&&m(i,a)}t.exports=l,t.exports.__esModule=!0,t.exports.default=t.exports},15592:function(t){function f(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}t.exports=f,t.exports.__esModule=!0,t.exports.default=t.exports},10255:function(t){function f(e){if(e==null)throw new TypeError("Cannot destructure "+e)}t.exports=f,t.exports.__esModule=!0,t.exports.default=t.exports},38425:function(t,f,e){var m=e(68277);function l(i,a){if(i==null)return{};var v=m(i,a),g,u;if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(i);for(u=0;u<A.length;u++)g=A[u],!(a.indexOf(g)>=0)&&Object.prototype.propertyIsEnumerable.call(i,g)&&(v[g]=i[g])}return v}t.exports=l,t.exports.__esModule=!0,t.exports.default=t.exports},68277:function(t){function f(e,m){if(e==null)return{};var l={},i=Object.keys(e),a,v;for(v=0;v<i.length;v++)a=i[v],!(m.indexOf(a)>=0)&&(l[a]=e[a]);return l}t.exports=f,t.exports.__esModule=!0,t.exports.default=t.exports},47131:function(t,f,e){var m=e(4620).default,l=e(70611);function i(a,v){if(v&&(m(v)==="object"||typeof v=="function"))return v;if(v!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l(a)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},21902:function(t){function f(e,m){return t.exports=f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},t.exports.__esModule=!0,t.exports.default=t.exports,f(e,m)}t.exports=f,t.exports.__esModule=!0,t.exports.default=t.exports}}]);
