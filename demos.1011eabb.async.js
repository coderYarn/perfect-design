(self.webpackChunkperfect_map=self.webpackChunkperfect_map||[]).push([[433],{20539:function(t,i,e){"use strict";e.r(i);var m=e(36047),l=e(64140),u=e(17210),a=function(){return(0,u.jsx)("div",{style:{height:"300px"},children:(0,u.jsx)(l._F,{akay:"a7a90e05a37d3f6bf76d4a9032fc9129",children:(0,u.jsx)(l.D5,{zoom:5,center:[105.602725,37.076636]})})})};i.default=a},93289:function(t,i,e){"use strict";e.r(i);var m=e(36047),l=e(64140),u=e(17210);function a(){var h=(0,m.useRef)();return(0,u.jsxs)("div",{style:{height:"300px"},children:[(0,u.jsx)("button",{children:"+"}),(0,u.jsx)(l._F,{akay:"9ba7e2f5c979b67281c5833918d6dfa0",plugin:"AMap.Driving",children:(0,u.jsx)(l.D5,{})})]})}i.default=a},70911:function(t,i,e){"use strict";e.r(i);var m=e(36047),l=e(64140),u=e(17210);function a(){return(0,u.jsx)("div",{style:{height:"300px"},children:(0,u.jsx)(l._F,{akay:"9ba7e2f5c979b67281c5833918d6dfa0",plugin:"AMap.Driving",children:(0,u.jsx)(l.D5,{center:[116.397428,39.90923],mapStyle:"amap://styles/darkblue"})})})}i.default=a},44620:function(t,i,e){"use strict";e.r(i);var m=e(36047),l=e(17210),u=function(){return(0,l.jsx)("div",{})};i.default=u},64140:function(t,i,e){"use strict";e.d(i,{_F:function(){return ve},D5:function(){return J}});var m=e(38425),l=e.n(m),u=e(76091),a=e.n(u),h=e(7863),M=e.n(h),s=e(36047),b=e(10255),R=e.n(b);function L(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];d.forEach(function(v){var r="set".concat(v),o="".concat(v.charAt(0).toLowerCase()).concat(v.slice(1)),f=(0,s.useState)(n[o]),g=M()(f,2),O=g[0],y=g[1];(0,s.useEffect)(function(){c&&n[o]!==void 0&&n[o]!==O&&c[r]&&typeof c[r]=="function"&&(c[r](n[o]),y(n[o]))},[c,n[o]])})}function K(c){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],v=arguments.length>3?arguments[3]:void 0;d.forEach(function(r){var o=r,f=n[o];(0,s.useEffect)(function(){if(c){var g=r.toLocaleLowerCase().replace(/^on/,"");return f&&g&&c.on(g,f),function(){g&&f&&c.off(g,f)}}},[c,n[o]])})}var F=K,Z=e(39620),A=e.n(Z);function Q(c){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];d.forEach(function(v){var r=v,o=(0,s.useState)(n[r]),f=M()(o,2),g=f[0],O=f[1];(0,s.useEffect)(function(){if(c&&n[r]!==void 0&&n[r]!==g){var y=c.getStatus();c.setStatus(a()(a()({},y),{},A()({},r,n[r]))),O(n[r])}},[c,n[r]])})}var z={map:void 0,AMap:void 0,container:void 0},H=function(n,d){return a()(a()({},n),d)},w=s.createContext({state:z,dispatch:function(){return null}});function me(){var c=useContext(w),n=c.state,d=c.dispatch;return _objectSpread(_objectSpread({},n),{},{state:n,dispatch:d})}var G=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=Object.assign({},(R()(n),n)),v=(0,s.useState)(),r=M()(v,2),o=r[0],f=r[1],g=(0,s.useState)(n.zoom||15),O=M()(g,2),y=O[0],P=O[1],S=(0,s.useState)(n.container),C=M()(S,2),p=C[0],D=C[1],x=(0,s.useContext)(w),j=x.dispatch;return(0,s.useEffect)(function(){if(p&&!o&&AMap){p.className=p.className+" react-amap-wapper";var U=new AMap.Map(p,a()({zoom:y},d));f(U)}return function(){o&&(o.clearInfoWindow(),o.clearLimitBounds(),o.clearMap(),o.destroy(),f(void 0))}},[p,o]),(0,s.useEffect)(function(){return o&&p&&j({map:o,container:p,AMap}),function(){j({map:void 0,container:void 0,AMap:void 0})}},[o,p]),(0,s.useMemo)(function(){o&&typeof n.zoom=="number"&&y!==n.zoom&&n.zoom>=2&&n.zoom<=20&&(P(n.zoom),o.setZoom(n.zoom))},[y,n.zoom]),(0,s.useMemo)(function(){n.center&&o&&o.setCenter(n.center)},[o,n.center]),Q(o,n,["dragEnable","zoomEnable","jogEnable","pitchEnable","rotateEnable","animateEnable","keyboardEnable"]),L(o,n,["Zoom","LabelzIndex","Layers","City","Bounds","LimitBounds","Lang","Rotation","DefaultCursor","MapStyle","Features","DefaultLayer","Pitch"]),F(o,n,["onMouseMove","onZoomChange","onMapMove","onMouseWheel","onZoomStart","onMouseOver","onMouseOut","onDblClick","onClick","onZoomEnd","onMoveEnd","onMouseUp","onMouseDown","onRightClick","onMoveStart","onDragStart","onDragging","onDragEnd","onHotspotOut","onHotspotOver","onTouchStart","onComplete","onHotspotClick","onTouchMove","onTouchEnd","onResize"]),{map:o,setMap:f,zoom:y,setZoom:P,container:p,setContainer:D}},T=e(17210),Y=["className","children"],Me=function(n){var d=useReducer(reducer,initialState),v=_slicedToArray(d,2),r=v[0],o=v[1];return _jsx(Context.Provider,{value:_objectSpread(_objectSpread({},r),{},{state:r,dispatch:o}),children:n.children})},$=(0,s.forwardRef)(function(c,n){var d=c.className,v=c.children,r=l()(c,Y),o=(0,s.useReducer)(H,z),f=M()(o,2),g=f[0],O=f[1],y=(0,s.useRef)(null),P=G(a()({container:r.container||y.current},r)),S=P.setContainer,C=P.container,p=P.map;(0,s.useEffect)(function(){return S(y.current)},[y.current]),(0,s.useImperativeHandle)(n,function(){return a()(a()({},r),{},{map:p,AMap,container:r.container||y.current})},[p]);var D=s.Children.toArray(v);return(0,s.useEffect)(function(){p&&O({map:p,container:y.current,AMap})},[p]),(0,T.jsxs)(w.Provider,{value:a()(a()({},g),{},{state:g,dispatch:O}),children:[!r.container&&(0,T.jsx)("div",{ref:y,className:"react-amap-wapper ".concat(d),style:a()({fontSize:1,width:"100%",height:"100%"},r.style)}),AMap&&p&&typeof v=="function"&&v({AMap,map:p,container:C}),AMap&&p&&D.map(function(x,j){return(0,s.isValidElement)(x)?typeof x=="string"?(0,s.cloneElement)((0,T.jsx)(s.Fragment,{children:x}),{key:j}):x.type&&typeof x.type=="string"?(0,s.cloneElement)(x,{key:j}):(0,s.cloneElement)(x,a()(a()({},x.props),{},{AMap,map:p,container:C,key:j})):null})]})}),V=$,J=V,X=e(84019),k=e.n(X),_=e(4620),q=e.n(_),ee=e(32061),te=e.n(ee),re=e(80044),ne=e.n(re),ae=e(58518),oe=e.n(ae),se=e(70611),I=e.n(se),ue=e(48234),ie=e.n(ue),ce=e(58879),fe=e.n(ce),W={};function pe(c){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"_react_amap_plugin",d=document&&(document.head||document.getElementsByTagName("head")[0]),v=document.getElementById(n);return new Promise(function(r,o){if(!document||c in W||v){r();return}var f=document.createElement("script");f.type="text/javascript",f.id=n,f.async=!0,f.defer=!0,f.src=c,f.onerror=function(g){d.removeChild(f),o(new URIError("The Script ".concat(c," is no accessible.")))},f.onload=function(){W[c]=!0,r()},d.appendChild(f)})}function le(c){return new Promise(function(n,d){window.setTimeout(n,c)})}var B=3,N=function(c){ie()(d,c);var n=fe()(d);function d(v){var r;if(ne()(this,d),r=n.call(this,v),A()(I()(r),"isMountedOk",!1),A()(I()(r),"state",{loaded:!!window.AMap}),A()(I()(r),"handleError",function(o){r.isMountedOk&&r.setState({error:o})}),A()(I()(r),"finish",function(){r.isMountedOk&&r.setState({loaded:!0})}),v.akay===null)throw new TypeError("AMap: akay is required");return r}return oe()(d,[{key:"componentDidMount",value:function(){this.isMountedOk=!0;var r=this.props.callbackName;if(window.AMap==null){if(window[r]){d.waitQueue.push([this.finish,this.handleError]);return}this.loadMap()}}},{key:"componentWillUnmount",value:function(){this.isMountedOk=!1}},{key:"render",value:function(){return this.state.loaded?this.props.children:this.props.fallback?this.props.fallback(this.state.error):this.state.error?(0,T.jsx)("div",{style:{color:"red"},children:this.state.error.message}):null}},{key:"getScriptSrc",value:function(){var r=this.props,o=r.protocol||window.location.protocol;o.indexOf(":")===-1&&(o+=":");var f="";return r.plugin&&(f="&plugin=".concat(r.plugin)),"".concat(o,"//").concat(r.hostAndPath,"?v=").concat(r.version,"&key=").concat(r.akay,"&callback=").concat(r.callbackName).concat(f)}},{key:"loadMap",value:function(){var v=te()(k()().mark(function o(){var f=this,g,O,y,P,S;return k()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:g=this.props.callbackName,O=this.getScriptSrc(),window[g]=function(){var D=d.waitQueue;d.waitQueue=[],D.forEach(function(x){return x[0]()}),f.finish()},y=k()().mark(function D(){var x,j;return k()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.prev=0,E.next=3,pe(O);case 3:return E.abrupt("return","break");case 6:if(E.prev=6,E.t0=E.catch(0),P!==B-1){E.next=15;break}return x=new Error("Failed to load AMap: ".concat(E.t0.message)),j=d.waitQueue,d.waitQueue=[],j.forEach(function(he){return he[1](x)}),f.handleError(x),E.abrupt("return",{v:void 0});case 15:return E.next=17,le(P*1e3);case 17:case"end":return E.stop()}},D,null,[[0,6]])}),P=0;case 5:if(!(P<B)){p.next=15;break}return p.delegateYield(y(),"t0",7);case 7:if(S=p.t0,S!=="break"){p.next=10;break}return p.abrupt("break",15);case 10:if(q()(S)!=="object"){p.next=12;break}return p.abrupt("return",S.v);case 12:P++,p.next=5;break;case 15:case"end":return p.stop()}},o,this)}));function r(){return v.apply(this,arguments)}return r}()}]),d}(s.Component);A()(N,"defaultProps",{protocol:/^file:/.test(window.location.protocol)?"https":window.location.protocol,akay:"",hostAndPath:"webapi.amap.com/maps",version:"2.0",callbackName:"load_amap_sdk",plugin:""}),A()(N,"waitQueue",[]);var de=N,ve=de,ge=function(){return _jsx("div",{})},ye=null,xe=null},70611:function(t){function i(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},80044:function(t){function i(e,m){if(!(e instanceof m))throw new TypeError("Cannot call a class as a function")}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},58518:function(t,i,e){var m=e(86671);function l(a,h){for(var M=0;M<h.length;M++){var s=h[M];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(a,m(s.key),s)}}function u(a,h,M){return h&&l(a.prototype,h),M&&l(a,M),Object.defineProperty(a,"prototype",{writable:!1}),a}t.exports=u,t.exports.__esModule=!0,t.exports.default=t.exports},58879:function(t,i,e){var m=e(53107),l=e(15592),u=e(47131);function a(h){var M=l();return function(){var b=m(h),R;if(M){var L=m(this).constructor;R=Reflect.construct(b,arguments,L)}else R=b.apply(this,arguments);return u(this,R)}}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports},53107:function(t){function i(e){return t.exports=i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},t.exports.__esModule=!0,t.exports.default=t.exports,i(e)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},48234:function(t,i,e){var m=e(21902);function l(u,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(a&&a.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),Object.defineProperty(u,"prototype",{writable:!1}),a&&m(u,a)}t.exports=l,t.exports.__esModule=!0,t.exports.default=t.exports},15592:function(t){function i(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},10255:function(t){function i(e){if(e==null)throw new TypeError("Cannot destructure "+e)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},38425:function(t,i,e){var m=e(68277);function l(u,a){if(u==null)return{};var h=m(u,a),M,s;if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(u);for(s=0;s<b.length;s++)M=b[s],!(a.indexOf(M)>=0)&&Object.prototype.propertyIsEnumerable.call(u,M)&&(h[M]=u[M])}return h}t.exports=l,t.exports.__esModule=!0,t.exports.default=t.exports},68277:function(t){function i(e,m){if(e==null)return{};var l={},u=Object.keys(e),a,h;for(h=0;h<u.length;h++)a=u[h],!(m.indexOf(a)>=0)&&(l[a]=e[a]);return l}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},47131:function(t,i,e){var m=e(4620).default,l=e(70611);function u(a,h){if(h&&(m(h)==="object"||typeof h=="function"))return h;if(h!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l(a)}t.exports=u,t.exports.__esModule=!0,t.exports.default=t.exports},21902:function(t){function i(e,m){return t.exports=i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,a){return u.__proto__=a,u},t.exports.__esModule=!0,t.exports.default=t.exports,i(e,m)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports}}]);
